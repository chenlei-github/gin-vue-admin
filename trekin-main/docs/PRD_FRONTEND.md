# ğŸ“Š å‰ç«¯å±•ç¤ºéœ€æ±‚æ–‡æ¡£

> **æœ¬æ–‡æ¡£è¯¦ç»†æè¿°æ‰€æœ‰å‰ç«¯å±•ç¤ºé¡µé¢çš„å¸ƒå±€ã€æ•°æ®æŒ‡æ ‡å’Œè®¡ç®—å…¬å¼**

---

## 1ï¸âƒ£ é¦–é¡µ - å¸‚åœºåˆ—è¡¨é¡µ (`/`)

### 1.1 é¡µé¢å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é¡µé¢æ ‡é¢˜åŒºåŸŸ]                                              â”‚
â”‚  æ ‡é¢˜ï¼šå¸‚åœºåˆ†æ                                              â”‚
â”‚  å‰¯æ ‡é¢˜ï¼šæ¢ç´¢å’Œåˆ†æä¸åŒå¸‚åœºçš„ç«äº‰æƒ…å†µï¼Œäº†è§£å¸‚åœºè¶‹åŠ¿å’Œå“ç‰Œè¡¨ç°  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¡ç‰‡1    â”‚ å¡ç‰‡2    â”‚ å¡ç‰‡3    â”‚ å¡ç‰‡4    â”‚
â”‚ è¿½è¸ªå¸‚åœºæ•°â”‚ æ€»å¸‚åœºè§„æ¨¡â”‚ å•†å“æ€»æ•°  â”‚ æœç´¢é‡    â”‚
â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚
â”‚ æ•°å€¼     â”‚ æ•°å€¼     â”‚ æ•°å€¼     â”‚ æ•°å€¼     â”‚
â”‚ æ ‡ç­¾     â”‚ è¶‹åŠ¿     â”‚ æ ‡ç­¾     â”‚ æ ‡ç­¾     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å¸‚åœºåˆ—è¡¨è¡¨æ ¼]                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚å¸‚åœºåç§°â”‚å¸‚åœºè§„æ¨¡â”‚å¸‚åœºå¢é€Ÿâ”‚å¸‚åœºå£°é‡â”‚å“ç‰Œæ•°é‡â”‚æ“ä½œ    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ...    â”‚ ...    â”‚ ...    â”‚ ...    â”‚ ...    â”‚[æŸ¥çœ‹]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å¸‚åœºè¶‹åŠ¿é¢„è§ˆ1]      â”‚ [å¸‚åœºè¶‹åŠ¿é¢„è§ˆ2]      â”‚
â”‚ å¸‚åœºåç§°             â”‚ å¸‚åœºåç§°             â”‚
â”‚ è¶‹åŠ¿ç™¾åˆ†æ¯”           â”‚ è¶‹åŠ¿ç™¾åˆ†æ¯”           â”‚
â”‚ [è¿·ä½ æŸ±çŠ¶å›¾]         â”‚ [è¿·ä½ æŸ±çŠ¶å›¾]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡ï¼ˆ4ä¸ªï¼‰

#### å¡ç‰‡1ï¼šè¿½è¸ªå¸‚åœºæ•°
```typescript
{
  icon: "Building2",           // Lucideå›¾æ ‡
  iconColor: "bg-blue-500",    // è“è‰²èƒŒæ™¯
  label: "è¿½è¸ªå¸‚åœºæ•°",
  value: number,               // å¸‚åœºæ€»æ•°
  subLabel: "å·²æ¿€æ´»å¸‚åœº"
}
```

**æ•°æ®æ¥æº**ï¼š`markets` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š`COUNT(id) WHERE status='active'`  
**æ•°æ®ç±»å‹**ï¼šInteger

---

#### å¡ç‰‡2ï¼šæ€»å¸‚åœºè§„æ¨¡
```typescript
{
  icon: "TrendingUp",
  iconColor: "bg-green-500",   // ç»¿è‰²èƒŒæ™¯
  label: "æ€»å¸‚åœºè§„æ¨¡",
  value: string,               // æ ¼å¼åŒ–åçš„é‡‘é¢ï¼ˆ$XXM/$XXBï¼‰
  trend: {
    value: number,             // å¹³å‡å¢é•¿ç™¾åˆ†æ¯”
    direction: "up" | "down",
    icon: "ArrowUp" | "ArrowDown"
  },
  subLabel: "å¹³å‡å¢é•¿"
}
```

**æ•°æ®æ¥æº**ï¼š`markets` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š`SUM(total_revenue)`  
**æ•°æ®ç±»å‹**ï¼šDecimal(15,2)  
**æ ¼å¼åŒ–è§„åˆ™**ï¼š
- < 1,000,000: $XXK (åƒ)
- < 1,000,000,000: $XXM (ç™¾ä¸‡)
- >= 1,000,000,000: $XXB (åäº¿)

---

#### å¡ç‰‡3ï¼šå•†å“æ€»æ•°
```typescript
{
  icon: "Package",
  iconColor: "bg-pink-500",    // ç²‰è‰²èƒŒæ™¯
  label: "å•†å“æ€»æ•°",
  value: number,               // å•†å“æ•°é‡
  subLabel: "è·¨æ‰€æœ‰å¸‚åœº"
}
```

**æ•°æ®æ¥æº**ï¼š`markets` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š`SUM(total_products)`  
**æ•°æ®ç±»å‹**ï¼šInteger

---

#### å¡ç‰‡4ï¼šæœç´¢é‡
```typescript
{
  icon: "Search",
  iconColor: "bg-yellow-500",  // é»„è‰²èƒŒæ™¯
  label: "æœç´¢é‡",
  value: string,               // æ ¼å¼åŒ–åçš„æ•°é‡ï¼ˆXXK/XXMï¼‰
  subLabel: "æœˆåº¦"
}
```

**æ•°æ®æ¥æº**ï¼š`markets` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š`SUM(search_volume)`  
**æ•°æ®ç±»å‹**ï¼šBigInt  
**æ ¼å¼åŒ–è§„åˆ™**ï¼š
- < 1,000: ç›´æ¥æ˜¾ç¤ºæ•°å­—
- < 1,000,000: XXK
- >= 1,000,000: XXM

---

### 1.3 å¸‚åœºåˆ—è¡¨è¡¨æ ¼

#### è¡¨å¤´ç»“æ„
```
| å¸‚åœºåç§° | å¸‚åœºè§„æ¨¡ | å¸‚åœºå¢é€Ÿ | å¸‚åœºå£°é‡ | å“ç‰Œæ•°é‡ | å•†å“æ•°é‡ | æ“ä½œ |
```

#### æ¯è¡Œæ•°æ®ç»“æ„
```typescript
{
  // åˆ—1ï¼šå¸‚åœºåç§°
  name: {
    primary: string,      // ä¸»æ ‡é¢˜ï¼ˆå¦‚ï¼šCNC Router Machineï¼‰
    secondary: string     // å‰¯æ ‡é¢˜ï¼ˆå›ºå®šï¼šäºšé©¬é€Šç¾å›½å¸‚åœºï¼‰
  },
  
  // åˆ—2ï¼šå¸‚åœºè§„æ¨¡
  revenue: {
    primary: string,      // é”€å”®é¢ï¼ˆæ ¼å¼åŒ–ï¼š$13.8Mï¼‰
    secondary: string     // å›ºå®šï¼š"å¹´åº¦é¢„ä¼°"
  },
  
  // åˆ—3ï¼šå¸‚åœºå¢é€Ÿ
  cagr: {
    primary: string,      // CAGRç™¾åˆ†æ¯”ï¼ˆå¦‚ï¼š+15.5%ï¼‰
    secondary: string,    // å›ºå®šï¼š"å¹´å¤åˆå¢é•¿ç‡"
    trend: "up" | "down" | "neutral",
    icon: "TrendingUp" | "TrendingDown" | "Minus",
    color: "text-green-600" | "text-red-600" | "text-gray-600"
  },
  
  // åˆ—4ï¼šå¸‚åœºå£°é‡
  searchVolume: {
    primary: string,      // æœç´¢é‡ï¼ˆæ ¼å¼åŒ–ï¼š1.5Mï¼‰
    secondary: string     // å›ºå®šï¼š"æœˆæœç´¢é‡"
  },
  
  // åˆ—5ï¼šå“ç‰Œæ•°é‡
  brandCount: {
    primary: number,      // å“ç‰Œæ•°é‡
    secondary: string     // å›ºå®šï¼š"æ´»è·ƒå“ç‰Œ"
  },
  
  // åˆ—6ï¼šå•†å“æ•°é‡
  productCount: {
    primary: number,      // å•†å“æ•°é‡
    secondary: string     // å›ºå®šï¼š"åœ¨å”®å•†å“"
  },
  
  // åˆ—7ï¼šæ“ä½œ
  action: {
    label: "æŸ¥çœ‹è¯¦æƒ…",
    icon: "ArrowRight",
    link: `/market/${market_slug}`
  }
}
```

#### æ•°æ®æŒ‡æ ‡è®¡ç®—

| æŒ‡æ ‡åç§° | æ•°æ®æ¥æº | è®¡ç®—å…¬å¼ | æ•°æ®ç±»å‹ |
|---------|---------|---------|---------|
| å¸‚åœºè§„æ¨¡ | `market_monthly_trends` | `SUM(revenue) WHERE market_id=X AND date >= DATE_SUB(NOW(), INTERVAL 12 MONTH)` | Decimal(15,2) |
| å¸‚åœºå¢é€Ÿ(CAGR) | `market_monthly_trends` | è§ä¸‹æ–¹CAGRè®¡ç®—å…¬å¼ | Decimal(5,2) |
| å¸‚åœºå£°é‡ | `keyword_monthly_volume` + `keywords` | `SUM(volume) WHERE market_id=X AND date=æœ€è¿‘æœˆä»½` | BigInt |
| å“ç‰Œæ•°é‡ | `brands` | `COUNT(DISTINCT id) WHERE market_id=X` | Integer |
| å•†å“æ•°é‡ | `products` | `COUNT(asin) WHERE market_id=X` | Integer |

**CAGRè®¡ç®—å…¬å¼**ï¼š
```javascript
// éœ€è¦è‡³å°‘12ä¸ªæœˆçš„æ•°æ®
function calculateCAGR(monthlyData) {
  if (monthlyData.length < 12) return null;
  
  const sortedData = monthlyData.sort((a, b) => new Date(a.date) - new Date(b.date));
  const beginningValue = sortedData[0].revenue;
  const endingValue = sortedData[sortedData.length - 1].revenue;
  const years = (sortedData.length - 1) / 12;
  
  if (beginningValue <= 0) return null;
  
  const cagr = (Math.pow(endingValue / beginningValue, 1 / years) - 1) * 100;
  
  // é™åˆ¶åœ¨ -99% åˆ° +999% ä¹‹é—´
  return Math.max(-99, Math.min(999, cagr));
}
```

---

### 1.4 å¸‚åœºè¶‹åŠ¿é¢„è§ˆåŒºï¼ˆ2åˆ—ç½‘æ ¼ï¼‰

#### æ¯ä¸ªå¸‚åœºå¡ç‰‡ç»“æ„
```typescript
{
  marketName: string,           // å¸‚åœºåç§°
  title: string,                // "è¿‡å»12ä¸ªæœˆè¶‹åŠ¿"
  trend: {
    value: number,              // è¶‹åŠ¿ç™¾åˆ†æ¯”
    direction: "up" | "down",
    icon: "TrendingUp" | "TrendingDown"
  },
  chartData: Array<{
    month: string,              // æœˆä»½ï¼ˆç®€å†™ï¼šJan, Feb...ï¼‰
    revenue: number,            // é”€å”®é¢
    opacity: number             // é€æ˜åº¦ï¼ˆ0.3-1.0ï¼Œæ¸å˜æ•ˆæœï¼‰
  }>,
  link: string                  // è·³è½¬é“¾æ¥ï¼š/market/${market_slug}
}
```

#### è¿·ä½ æŸ±çŠ¶å›¾è§„æ ¼
- **æ•°æ®ç‚¹æ•°é‡**ï¼š12ä¸ªæœˆ
- **æŸ±çŠ¶æ¡æ ·å¼**ï¼šåœ†è§’é¡¶éƒ¨ï¼Œæ¸å˜é€æ˜åº¦
- **é€æ˜åº¦è®¡ç®—**ï¼š`opacity = 0.3 + (index / 11) * 0.7`
- **é¢œè‰²**ï¼šè“è‰² `#3b82f6`
- **é«˜åº¦**ï¼š80px
- **äº¤äº’**ï¼šHoveræ˜¾ç¤ºå…·ä½“æ•°å€¼

---

## 2ï¸âƒ£ å¸‚åœºè¯¦æƒ…é¡µ (`/market/[id]`)

### 2.1 é¡µé¢å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é¢åŒ…å±‘å¯¼èˆª]                                                â”‚
â”‚  å¸‚åœºåˆ†æ > {å¸‚åœºåç§°}                                       â”‚
â”‚                                                [è¿”å›]æŒ‰é’®    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é¡µé¢æ ‡é¢˜åŒºåŸŸ]                                              â”‚
â”‚  æ ‡é¢˜ï¼š{å¸‚åœºåç§°}                                            â”‚
â”‚  å‰¯æ ‡é¢˜ï¼šåˆ†æè¯¥ç»†åˆ†å¸‚åœºçš„ç«äº‰æƒ…å†µã€å“ç‰Œè¡¨ç°å’Œå¸‚åœºè¶‹åŠ¿        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¸‚åœºè§„æ¨¡  â”‚ å¸‚åœºå¢é€Ÿ  â”‚ å¸‚åœºå£°é‡  â”‚ å“ç‰Œæ•°é‡  â”‚
â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚
â”‚ æ•°å€¼     â”‚ æ•°å€¼     â”‚ æ•°å€¼     â”‚ æ•°å€¼     â”‚
â”‚ è¯´æ˜     â”‚ è¯´æ˜     â”‚ è¯´æ˜     â”‚ è¯´æ˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å¸‚åœºè¶‹åŠ¿å›¾è¡¨]                                              â”‚
â”‚  æ ‡é¢˜ï¼šå¸‚åœºè¶‹åŠ¿åˆ†æ                                          â”‚
â”‚  [åŒè½´æŠ˜çº¿å›¾ï¼šé”€å”®é¢(å·¦è½´) + æœç´¢é‡(å³è½´)]                   â”‚
â”‚  [å¯åˆ‡æ¢å¯¹æ¯”å…¶ä»–å¸‚åœº]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å“ç‰Œé”€å”®é¢å æ¯”]      â”‚ [å“ç‰Œé”€å”®é¢æ’å]      â”‚
â”‚ é¥¼å›¾ï¼ˆTop 8å“ç‰Œï¼‰    â”‚ æŸ±çŠ¶å›¾ï¼ˆTop 8å“ç‰Œï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å“ç‰Œåˆ—è¡¨è¡¨æ ¼]                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚å“ç‰Œåç§°â”‚ç‹¬ç«‹ç«™  â”‚å“ç‰Œè§„æ¨¡â”‚å“ç‰Œå¢é€Ÿâ”‚ç¤¾äº¤åª’ä½“â”‚æ“ä½œ    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ...    â”‚ ...    â”‚ ...    â”‚ ...    â”‚ ...    â”‚[æŸ¥çœ‹]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡ï¼ˆ4ä¸ªï¼‰

#### å¡ç‰‡1ï¼šå¸‚åœºè§„æ¨¡
```typescript
{
  icon: "TrendingUp",
  iconColor: "bg-green-500",
  label: "å¸‚åœºè§„æ¨¡",
  value: string,               // æ ¼å¼åŒ–é‡‘é¢
  subLabel: "å¹´åº¦å¸‚åœºè§„æ¨¡é¢„ä¼°"
}
```

**æ•°æ®æ¥æº**ï¼š`market_monthly_trends` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š
```sql
SELECT SUM(revenue) 
FROM market_monthly_trends 
WHERE market_id = ? 
  AND date >= DATE_SUB(NOW(), INTERVAL 12 MONTH)
```

---

#### å¡ç‰‡2ï¼šå¸‚åœºå¢é€Ÿ
```typescript
{
  icon: "TrendingUp" | "TrendingDown",
  iconColor: "bg-green-500" | "bg-red-500",
  label: "å¸‚åœºå¢é€Ÿ",
  value: string,               // "+15.5%" æˆ– "N/A"
  subLabel: "å¹´å¤åˆå¢é•¿ç‡" | "æ•°æ®ä¸è¶³"
}
```

**æ•°æ®æ¥æº**ï¼š`market_monthly_trends` è¡¨  
**è®¡ç®—å…¬å¼**ï¼šåŒé¦–é¡µCAGRè®¡ç®—  
**æ˜¾ç¤ºè§„åˆ™**ï¼š
- æ•°æ® >= 12ä¸ªæœˆï¼šæ˜¾ç¤ºCAGRç™¾åˆ†æ¯”
- æ•°æ® < 12ä¸ªæœˆï¼šæ˜¾ç¤º "N/A"ï¼Œå‰¯æ ‡é¢˜æ˜¾ç¤º "æ•°æ®ä¸è¶³"

---

#### å¡ç‰‡3ï¼šå¸‚åœºå£°é‡
```typescript
{
  icon: "Search",
  iconColor: "bg-yellow-500",
  label: "å¸‚åœºå£°é‡",
  value: string,               // æ ¼å¼åŒ–æœç´¢é‡
  subLabel: "æœˆåº¦æœç´¢é‡æ€»å’Œ"
}
```

**æ•°æ®æ¥æº**ï¼š`keyword_monthly_volume` + `keywords` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š
```sql
SELECT SUM(kmv.volume)
FROM keyword_monthly_volume kmv
JOIN keywords k ON kmv.keyword_id = k.id
WHERE k.market_id = ?
  AND kmv.date = (SELECT MAX(date) FROM keyword_monthly_volume)
```

---

#### å¡ç‰‡4ï¼šå“ç‰Œæ•°é‡
```typescript
{
  icon: "Building2",
  iconColor: "bg-blue-500",
  label: "å“ç‰Œæ•°é‡",
  value: number,
  subLabel: "æ´»è·ƒå“ç‰Œæ€»æ•°"
}
```

**æ•°æ®æ¥æº**ï¼š`brands` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š`COUNT(DISTINCT id) WHERE market_id = ?`

---

### 2.3 å¸‚åœºè¶‹åŠ¿å›¾è¡¨

#### å›¾è¡¨é…ç½®
```typescript
{
  type: "ComposedChart",       // Rechartsç»„ä»¶
  height: 400,
  data: Array<{
    date: string,              // æœˆä»½ï¼ˆYYYY-MMï¼‰
    revenue: number,           // é”€å”®é¢ï¼ˆå·¦Yè½´ï¼‰
    searchVolume: number       // æœç´¢é‡ï¼ˆå³Yè½´ï¼‰
  }>,
  
  // å·¦Yè½´ï¼šé”€å”®é¢
  leftAxis: {
    dataKey: "revenue",
    stroke: "#3b82f6",         // è“è‰²
    strokeWidth: 2,
    name: "é”€å”®é¢"
  },
  
  // å³Yè½´ï¼šæœç´¢é‡
  rightAxis: {
    dataKey: "searchVolume",
    stroke: "#f97316",         // æ©™è‰²
    strokeWidth: 2,
    name: "æœç´¢é‡"
  },
  
  // äº¤äº’
  tooltip: true,
  legend: true,
  grid: true
}
```

#### æ•°æ®æ¥æº
**é”€å”®é¢è¶‹åŠ¿**ï¼š
```sql
SELECT date, revenue 
FROM market_monthly_trends 
WHERE market_id = ? 
ORDER BY date ASC
LIMIT 24  -- æœ€å¤šæ˜¾ç¤º24ä¸ªæœˆ
```

**æœç´¢é‡è¶‹åŠ¿**ï¼š
```sql
SELECT kmv.date, SUM(kmv.volume) as volume
FROM keyword_monthly_volume kmv
JOIN keywords k ON kmv.keyword_id = k.id
WHERE k.market_id = ?
GROUP BY kmv.date
ORDER BY kmv.date ASC
LIMIT 24
```

---

### 2.4 å“ç‰Œåˆ†å¸ƒå›¾è¡¨ï¼ˆ2åˆ—ï¼‰

#### å·¦ä¾§ï¼šå“ç‰Œé”€å”®é¢å æ¯”ï¼ˆé¥¼å›¾ï¼‰
```typescript
{
  type: "PieChart",
  data: Array<{
    name: string,              // å“ç‰Œåç§°
    value: number,             // é”€å”®é¢
    percentage: number,        // å æ¯”ç™¾åˆ†æ¯”
    fill: string               // é¢œè‰²
  }>,
  colors: [
    "#3b82f6", "#10b981", "#f59e0b", "#ef4444",
    "#8b5cf6", "#ec4899", "#06b6d4", "#84cc16"
  ],
  showTop: 8,                  // åªæ˜¾ç¤ºTop 8å“ç‰Œ
  label: true,                 // æ˜¾ç¤ºç™¾åˆ†æ¯”æ ‡ç­¾
  legend: true
}
```

**æ•°æ®æ¥æº**ï¼š
```sql
SELECT 
  b.brand_name,
  SUM(bmt.revenue) as total_revenue
FROM brand_monthly_trends bmt
JOIN brands b ON bmt.brand_id = b.id
WHERE b.market_id = ?
  AND bmt.date >= DATE_SUB(NOW(), INTERVAL 12 MONTH)
GROUP BY b.id
ORDER BY total_revenue DESC
LIMIT 8
```

---

#### å³ä¾§ï¼šå“ç‰Œé”€å”®é¢æ’åï¼ˆæŸ±çŠ¶å›¾ï¼‰
```typescript
{
  type: "BarChart",
  data: Array<{
    name: string,              // å“ç‰Œåç§°
    revenue: number            // é”€å”®é¢
  }>,
  xAxis: {
    dataKey: "name",
    angle: -45,                // æ–œ45åº¦æ˜¾ç¤º
    textAnchor: "end"
  },
  yAxis: {
    label: "é”€å”®é¢"
  },
  bar: {
    fill: "#3b82f6",
    radius: [8, 8, 0, 0]       // åœ†è§’é¡¶éƒ¨
  }
}
```

**æ•°æ®æ¥æº**ï¼šåŒé¥¼å›¾

---

### 2.5 å“ç‰Œåˆ—è¡¨è¡¨æ ¼

#### è¡¨å¤´ç»“æ„
```
| å“ç‰Œåç§° | å“ç‰Œç‹¬ç«‹ç«™ | å“ç‰Œè§„æ¨¡ | å“ç‰Œå¢é€Ÿ | ç¤¾äº¤åª’ä½“çƒ­åº¦ | æ“ä½œ |
```

#### æ¯è¡Œæ•°æ®ç»“æ„
```typescript
{
  // åˆ—1ï¼šå“ç‰Œåç§°
  brand: {
    primary: string,           // å“ç‰Œå
    secondary: string          // "Xä¸ªå•†å“"
  },
  
  // åˆ—2ï¼šå“ç‰Œç‹¬ç«‹ç«™
  website: {
    url: string | null,
    icon: "Globe",
    display: string | "-"
  },
  
  // åˆ—3ï¼šå“ç‰Œè§„æ¨¡
  revenue: {
    primary: string,           // æ ¼å¼åŒ–é‡‘é¢
    secondary: "å¹´åº¦é¢„ä¼°"
  },
  
  // åˆ—4ï¼šå“ç‰Œå¢é€Ÿ
  cagr: {
    primary: string,           // "+20.3%" æˆ– "N/A"
    secondary: string,
    trend: "up" | "down" | "neutral",
    icon: string
  },
  
  // åˆ—5ï¼šç¤¾äº¤åª’ä½“çƒ­åº¦
  social: {
    youtube: {
      icon: "Youtube",
      color: "text-red-600",
      value: string,           // æ ¼å¼åŒ–è®¢é˜…æ•°
      url: string | null
    },
    instagram: {
      icon: "Instagram",
      color: "text-pink-600",
      value: string,
      url: string | null
    },
    facebook: {
      icon: "Facebook",
      color: "text-blue-600",
      value: string,
      url: string | null
    },
    reddit: {
      icon: "MessageCircle",
      color: "text-orange-600",
      value: string,           // å¸–å­æ•°
      url: string | null
    }
  },
  
  // åˆ—6ï¼šæ“ä½œ
  action: {
    label: "æŸ¥çœ‹è¯¦æƒ…",
    link: `/market/${market_slug}/brand/${brand_name}`
  }
}
```

#### æ•°æ®æ¥æº
```sql
SELECT 
  b.id,
  b.brand_name,
  b.website,
  b.total_revenue,
  b.cagr,
  b.product_count,
  bsm_yt.url as youtube_url,
  bsm_yt.subscribers as youtube_subscribers,
  bsm_ig.url as instagram_url,
  bsm_ig.followers as instagram_followers,
  bsm_fb.url as facebook_url,
  bsm_fb.followers as facebook_followers,
  bsm_rd.url as reddit_url,
  bsm_rd.posts as reddit_posts
FROM brands b
LEFT JOIN brand_social_media bsm_yt ON b.id = bsm_yt.brand_id AND bsm_yt.platform = 'youtube'
LEFT JOIN brand_social_media bsm_ig ON b.id = bsm_ig.brand_id AND bsm_ig.platform = 'instagram'
LEFT JOIN brand_social_media bsm_fb ON b.id = bsm_fb.brand_id AND bsm_fb.platform = 'facebook'
LEFT JOIN brand_social_media bsm_rd ON b.id = bsm_rd.brand_id AND bsm_rd.platform = 'reddit'
WHERE b.market_id = ?
ORDER BY b.total_revenue DESC
```

---

## 3ï¸âƒ£ å“ç‰Œè¯¦æƒ…é¡µ (`/market/[id]/brand/[brand]`)

### 3.1 é¡µé¢å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é¢åŒ…å±‘å¯¼èˆª]                                                â”‚
â”‚  å¸‚åœºåˆ†æ > {å¸‚åœºåç§°} > {å“ç‰Œåç§°}                          â”‚
â”‚                                                [è¿”å›å¸‚åœº]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é¡µé¢æ ‡é¢˜åŒºåŸŸ]                                              â”‚
â”‚  æ ‡é¢˜ï¼š{å“ç‰Œåç§°}                                            â”‚
â”‚  å‰¯æ ‡é¢˜ï¼šå“ç‰Œé”€å”®è¶‹åŠ¿ã€ç¤¾äº¤åª’ä½“æ•°æ®å’Œäº§å“ä¿¡æ¯                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å“ç‰Œè§„æ¨¡  â”‚ å“ç‰Œå¢é€Ÿ  â”‚ å•†å“æ•°é‡  â”‚ å“ç‰Œç‹¬ç«‹ç«™â”‚
â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚ [æŒ‰é’®]   â”‚
â”‚ æ•°å€¼     â”‚ æ•°å€¼     â”‚ æ•°å€¼     â”‚          â”‚
â”‚ è¯´æ˜     â”‚ è¯´æ˜     â”‚ è¯´æ˜     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å“ç‰Œé”€å”®è¶‹åŠ¿å›¾è¡¨]                                          â”‚
â”‚  æ ‡é¢˜ï¼šå“ç‰Œé”€å”®è¶‹åŠ¿                                          â”‚
â”‚  å‰¯æ ‡é¢˜ï¼šå“ç‰Œé”€å”®é¢å†å²è¶‹åŠ¿ï¼ˆXä¸ªæœˆæ•°æ®ï¼‰                     â”‚
â”‚  [æŠ˜çº¿å›¾]                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ç¤¾äº¤åª’ä½“æ•°æ®å¡ç‰‡]                                          â”‚
â”‚  æ ‡é¢˜ï¼šç¤¾äº¤åª’ä½“æ•°æ®                                          â”‚
â”‚  å‰¯æ ‡é¢˜ï¼šå“ç‰Œåœ¨å„ç¤¾äº¤åª’ä½“å¹³å°çš„è¡¨ç°                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ YouTube  â”‚Instagram â”‚ Facebook â”‚ Reddit   â”‚            â”‚
â”‚  â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚ [å›¾æ ‡]   â”‚            â”‚
â”‚  â”‚ è®¢é˜…æ•°   â”‚ ç²‰ä¸æ•°   â”‚ å…³æ³¨æ•°   â”‚ å¸–å­æ•°   â”‚            â”‚
â”‚  â”‚ [è®¿é—®]   â”‚ [è®¿é—®]   â”‚ [è®¿é—®]   â”‚ [è®¿é—®]   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å“ç‰Œå•†å“ç½‘æ ¼]                                              â”‚
â”‚  æ ‡é¢˜ï¼šå“ç‰Œå•†å“                                              â”‚
â”‚  å‰¯æ ‡é¢˜ï¼šè¯¥å“ç‰Œåœ¨äºšé©¬é€Šçš„æ‰€æœ‰å•†å“åˆ—è¡¨                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚å•†å“å¡ç‰‡â”‚å•†å“å¡ç‰‡â”‚å•†å“å¡ç‰‡â”‚å•†å“å¡ç‰‡â”‚                    â”‚
â”‚  â”‚ [å›¾ç‰‡] â”‚ [å›¾ç‰‡] â”‚ [å›¾ç‰‡] â”‚ [å›¾ç‰‡] â”‚                    â”‚
â”‚  â”‚ æ ‡é¢˜   â”‚ æ ‡é¢˜   â”‚ æ ‡é¢˜   â”‚ æ ‡é¢˜   â”‚                    â”‚
â”‚  â”‚ è¯„åˆ†   â”‚ è¯„åˆ†   â”‚ è¯„åˆ†   â”‚ è¯„åˆ†   â”‚                    â”‚
â”‚  â”‚ è¶‹åŠ¿å›¾ â”‚ è¶‹åŠ¿å›¾ â”‚ è¶‹åŠ¿å›¾ â”‚ è¶‹åŠ¿å›¾ â”‚                    â”‚
â”‚  â”‚ ä»·æ ¼   â”‚ ä»·æ ¼   â”‚ ä»·æ ¼   â”‚ ä»·æ ¼   â”‚                    â”‚
â”‚  â”‚ [æŸ¥çœ‹] â”‚ [æŸ¥çœ‹] â”‚ [æŸ¥çœ‹] â”‚ [æŸ¥çœ‹] â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡ï¼ˆ4ä¸ªï¼‰

#### å¡ç‰‡1ï¼šå“ç‰Œè§„æ¨¡
```typescript
{
  icon: "TrendingUp",
  iconColor: "bg-green-500",
  label: "å“ç‰Œè§„æ¨¡",
  value: string,               // æ ¼å¼åŒ–é‡‘é¢
  subLabel: "å¹´åº¦é”€å”®é¢é¢„ä¼°"
}
```

**æ•°æ®æ¥æº**ï¼š`brand_monthly_trends` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š
```sql
SELECT SUM(revenue)
FROM brand_monthly_trends
WHERE brand_id = ?
  AND date >= DATE_SUB(NOW(), INTERVAL 12 MONTH)
```

---

#### å¡ç‰‡2ï¼šå“ç‰Œå¢é€Ÿ
```typescript
{
  icon: "TrendingUp" | "TrendingDown",
  iconColor: "bg-green-500" | "bg-red-500",
  label: "å“ç‰Œå¢é€Ÿ",
  value: string,               // "+20.3%" æˆ– "N/A"
  subLabel: "å¹´å¤åˆå¢é•¿ç‡" | "æ•°æ®ä¸è¶³"
}
```

**æ•°æ®æ¥æº**ï¼š`brand_monthly_trends` è¡¨  
**è®¡ç®—å…¬å¼**ï¼šåŒCAGRè®¡ç®—

---

#### å¡ç‰‡3ï¼šå•†å“æ•°é‡
```typescript
{
  icon: "Package",
  iconColor: "bg-pink-500",
  label: "å•†å“æ•°é‡",
  value: number,
  subLabel: "åœ¨å”®å•†å“æ€»æ•°"
}
```

**æ•°æ®æ¥æº**ï¼š`products` è¡¨  
**è®¡ç®—å…¬å¼**ï¼š`COUNT(asin) WHERE brand_id = ?`

---

#### å¡ç‰‡4ï¼šå“ç‰Œç‹¬ç«‹ç«™
```typescript
{
  icon: "Globe",
  iconColor: "bg-blue-500",
  label: "å“ç‰Œç‹¬ç«‹ç«™",
  button: {
    label: "è®¿é—®ç½‘ç«™",
    icon: "ExternalLink",
    url: string | null,
    disabled: boolean          // æ— ç½‘ç«™æ—¶ç¦ç”¨
  } | {
    label: "æš‚æ— æ•°æ®",
    disabled: true
  }
}
```

**æ•°æ®æ¥æº**ï¼š`brands` è¡¨çš„ `website` å­—æ®µ

---

### 3.3 å“ç‰Œé”€å”®è¶‹åŠ¿å›¾è¡¨

#### å›¾è¡¨é…ç½®
```typescript
{
  type: "LineChart",
  height: 300,
  data: Array<{
    date: string,              // æœˆä»½
    revenue: number            // é”€å”®é¢
  }>,
  line: {
    dataKey: "revenue",
    stroke: "#3b82f6",
    strokeWidth: 3,
    dot: true,                 // æ˜¾ç¤ºæ•°æ®ç‚¹
    activeDot: { r: 6 }
  },
  xAxis: {
    dataKey: "date",
    label: "æœˆä»½"
  },
  yAxis: {
    label: "é”€å”®é¢"
  },
  tooltip: true,
  grid: true
}
```

**æ•°æ®æ¥æº**ï¼š
```sql
SELECT date, revenue
FROM brand_monthly_trends
WHERE brand_id = ?
ORDER BY date ASC
```

---

### 3.4 ç¤¾äº¤åª’ä½“æ•°æ®å¡ç‰‡ï¼ˆ4åˆ—ï¼‰

#### YouTubeå¡ç‰‡
```typescript
{
  platform: "youtube",
  icon: "Youtube",
  iconColor: "text-red-600",
  bgColor: "bg-red-50",
  label: "YouTube",
  value: string,               // æ ¼å¼åŒ–è®¢é˜…æ•°ï¼ˆå¦‚ï¼š50Kï¼‰
  subLabel: "è®¢é˜…ç”¨æˆ·",
  button: {
    label: "è®¿é—®é¢‘é“",
    icon: "ExternalLink",
    url: string | null
  },
  visible: boolean             // æœ‰æ•°æ®æ—¶æ‰æ˜¾ç¤º
}
```

---

#### Instagramå¡ç‰‡
```typescript
{
  platform: "instagram",
  icon: "Instagram",
  iconColor: "text-pink-600",
  bgColor: "bg-pink-50",
  label: "Instagram",
  value: string,               // æ ¼å¼åŒ–ç²‰ä¸æ•°
  subLabel: "ç²‰ä¸æ•°é‡",
  button: {
    label: "è®¿é—®ä¸»é¡µ",
    icon: "ExternalLink",
    url: string | null
  },
  visible: boolean
}
```

---

#### Facebookå¡ç‰‡
```typescript
{
  platform: "facebook",
  icon: "Facebook",
  iconColor: "text-blue-600",
  bgColor: "bg-blue-50",
  label: "Facebook",
  value: string,               // æ ¼å¼åŒ–å…³æ³¨æ•°
  subLabel: "å…³æ³¨æ•°é‡",
  button: {
    label: "è®¿é—®ä¸»é¡µ",
    icon: "ExternalLink",
    url: string | null
  },
  visible: boolean
}
```

---

#### Redditå¡ç‰‡
```typescript
{
  platform: "reddit",
  icon: "MessageCircle",
  iconColor: "text-orange-600",
  bgColor: "bg-orange-50",
  label: "Reddit",
  value: string,               // å¸–å­æ•°
  subLabel: "è®¨è®ºæ•°é‡",
  button: {
    label: "è®¿é—®ç¤¾åŒº",
    icon: "ExternalLink",
    url: string | null
  },
  visible: boolean
}
```

**æ•°æ®æ¥æº**ï¼š
```sql
SELECT 
  platform,
  url,
  subscribers,
  followers,
  posts
FROM brand_social_media
WHERE brand_id = ?
```

---

### 3.5 å“ç‰Œå•†å“ç½‘æ ¼

#### å“åº”å¼å¸ƒå±€
- **æ¡Œé¢ç«¯**ï¼šæ¯è¡Œ4ä¸ªå•†å“
- **å¹³æ¿ç«¯**ï¼šæ¯è¡Œ3ä¸ªå•†å“
- **ç§»åŠ¨ç«¯**ï¼šæ¯è¡Œ1ä¸ªå•†å“

#### å•†å“å¡ç‰‡ç»“æ„
```typescript
{
  // å•†å“å›¾ç‰‡
  image: {
    url: string,
    alt: string,
    placeholder: "/placeholder-product.png"  // æ— å›¾æ—¶æ˜¾ç¤º
  },
  
  // å•†å“æ ‡é¢˜
  title: {
    text: string,
    maxLines: 2,               // æœ€å¤šæ˜¾ç¤º2è¡Œ
    overflow: "ellipsis"
  },
  
  // å“ç‰Œåç§°
  brand: string,
  
  // è¯„åˆ†å’Œè¯„è®º
  rating: {
    score: number,             // 0-5
    stars: JSX.Element,        // æ˜Ÿçº§ç»„ä»¶
    reviews: number,           // è¯„è®ºæ•°
    display: "4.5 (1,234)"
  },
  
  // é”€å”®è¶‹åŠ¿ï¼ˆè¿·ä½ å›¾ï¼‰
  salesTrend: {
    title: "é”€å”®è¶‹åŠ¿(6ä¸ªæœˆ)",
    data: Array<{
      month: string,
      sales: number,
      opacity: number          // æ¸å˜é€æ˜åº¦
    }>,
    trend: {
      value: number,           // è¶‹åŠ¿ç™¾åˆ†æ¯”
      direction: "up" | "down",
      icon: "ArrowUp" | "ArrowDown",
      color: "text-green-600" | "text-red-600"
    },
    chart: {
      type: "bar",
      height: 40,
      barWidth: 8,
      radius: [4, 4, 0, 0]
    }
  },
  
  // ä»·æ ¼å’Œæœˆé”€é‡
  price: {
    value: number,
    display: string,           // "$299.99"
    currency: "USD"
  },
  monthlySales: {
    value: number,
    display: string            // "1.2K/æœˆ"
  },
  
  // æ“ä½œæŒ‰é’®
  action: {
    label: "åœ¨äºšé©¬é€ŠæŸ¥çœ‹",
    icon: "ExternalLink",
    url: string,               // Amazonäº§å“é“¾æ¥
    target: "_blank"
  }
}
```

#### æ•°æ®æ¥æº

**å•†å“åŸºç¡€ä¿¡æ¯**ï¼š
```sql
SELECT 
  asin,
  title,
  brand,
  price,
  rating,
  reviews,
  image_url,
  monthly_sales
FROM products
WHERE brand_id = ?
ORDER BY monthly_sales DESC
```

**å•†å“é”€å”®è¶‹åŠ¿ï¼ˆæœ€è¿‘6ä¸ªæœˆï¼‰**ï¼š
```sql
SELECT 
  date,
  sales,
  units
FROM product_monthly_sales
WHERE asin = ?
ORDER BY date DESC
LIMIT 6
```

**è¶‹åŠ¿è®¡ç®—**ï¼š
```javascript
function calculateProductTrend(salesData) {
  if (salesData.length < 2) return null;
  
  const latest = salesData[0].sales;
  const oldest = salesData[salesData.length - 1].sales;
  
  if (oldest === 0) return null;
  
  return ((latest - oldest) / oldest) * 100;
}
```

---

## ğŸ¨ UI/UXè®¾è®¡è§„èŒƒ

### é…è‰²æ–¹æ¡ˆ
```css
/* ä¸»è‰²è°ƒ */
--primary: #2563eb;          /* è“è‰² */
--success: #10b981;          /* ç»¿è‰² */
--warning: #f59e0b;          /* é»„è‰² */
--danger: #ef4444;           /* çº¢è‰² */

/* èƒŒæ™¯è‰² */
--bg-primary: #ffffff;       /* ç™½è‰² */
--bg-secondary: #f8fafc;     /* æµ…ç° */
--bg-tertiary: #f1f5f9;      /* æ›´æµ…ç° */

/* è¾¹æ¡†è‰² */
--border: #e2e8f0;

/* æ–‡å­—è‰² */
--text-primary: #1e293b;     /* æ·±ç° */
--text-secondary: #64748b;   /* ä¸­ç° */
--text-tertiary: #94a3b8;    /* æµ…ç° */

/* ç¤¾äº¤åª’ä½“è‰² */
--youtube: #ef4444;          /* çº¢è‰² */
--instagram: #ec4899;        /* ç²‰è‰² */
--facebook: #3b82f6;         /* è“è‰² */
--reddit: #f97316;           /* æ©™è‰² */
```

### ç»„ä»¶è§„èŒƒ

#### å¡ç‰‡
```css
.card {
  background: white;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  padding: 24px;
  transition: box-shadow 0.2s;
}

.card:hover {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
```

#### æŒ‰é’®
```css
.button-primary {
  background: #2563eb;
  color: white;
  border-radius: 6px;
  height: 40px;
  padding: 0 24px;
  font-weight: 500;
  transition: background 0.2s;
}

.button-primary:hover {
  background: #1d4ed8;
}
```

#### è¡¨æ ¼
```css
.table {
  width: 100%;
  border-collapse: collapse;
}

.table thead {
  background: #f8fafc;
  border-bottom: 2px solid #e2e8f0;
}

.table tbody tr:nth-child(even) {
  background: #f8fafc;
}

.table tbody tr:hover {
  background: #f1f5f9;
}

.table td, .table th {
  padding: 12px 16px;
  text-align: left;
}
```

### å›¾æ ‡è§„èŒƒ
- **åº“**ï¼šLucide React
- **å¤§å°**ï¼š16pxï¼ˆå°ï¼‰ã€20pxï¼ˆä¸­ï¼‰ã€24pxï¼ˆå¤§ï¼‰
- **é¢œè‰²**ï¼šç»§æ‰¿çˆ¶å…ƒç´ æˆ–ä½¿ç”¨ä¸»é¢˜è‰²

### å›¾è¡¨è§„èŒƒ
- **åº“**ï¼šRecharts
- **é…è‰²**ï¼šä½¿ç”¨ä¸»é¢˜è‰²
- **äº¤äº’**ï¼šTooltipã€Legendã€Grid
- **å“åº”å¼**ï¼šè‡ªé€‚åº”å®¹å™¨å®½åº¦

### å“åº”å¼æ–­ç‚¹
```css
/* ç§»åŠ¨ç«¯ */
@media (max-width: 767px) {
  /* 1åˆ—å¸ƒå±€ */
}

/* å¹³æ¿ç«¯ */
@media (min-width: 768px) and (max-width: 1279px) {
  /* 2åˆ—å¸ƒå±€ */
}

/* æ¡Œé¢ç«¯ */
@media (min-width: 1280px) {
  /* 4åˆ—å¸ƒå±€ */
}
```

---

## âœ… å‰ç«¯å¼€å‘æ£€æŸ¥æ¸…å•

### é¦–é¡µ
- [ ] 4ä¸ªæ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡æ­£ç¡®æ˜¾ç¤º
- [ ] å¸‚åœºåˆ—è¡¨è¡¨æ ¼æ‰€æœ‰åˆ—æ­£ç¡®æ˜¾ç¤º
- [ ] å¸‚åœºè¶‹åŠ¿é¢„è§ˆå›¾æ­£ç¡®æ¸²æŸ“
- [ ] ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"è·³è½¬åˆ°å¸‚åœºè¯¦æƒ…é¡µ
- [ ] æ‰€æœ‰æ•°æ®æ ¼å¼åŒ–æ­£ç¡®ï¼ˆé‡‘é¢ã€æ•°é‡ï¼‰
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸

### å¸‚åœºè¯¦æƒ…é¡µ
- [ ] é¢åŒ…å±‘å¯¼èˆªæ­£ç¡®
- [ ] 4ä¸ªæ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡æ­£ç¡®æ˜¾ç¤º
- [ ] å¸‚åœºè¶‹åŠ¿åŒè½´å›¾è¡¨æ­£ç¡®æ¸²æŸ“
- [ ] å“ç‰Œé”€å”®é¢å æ¯”é¥¼å›¾æ­£ç¡®æ˜¾ç¤ºTop 8
- [ ] å“ç‰Œé”€å”®é¢æ’åæŸ±çŠ¶å›¾æ­£ç¡®æ˜¾ç¤ºTop 8
- [ ] å“ç‰Œåˆ—è¡¨è¡¨æ ¼æ‰€æœ‰åˆ—æ­£ç¡®æ˜¾ç¤º
- [ ] ç¤¾äº¤åª’ä½“å›¾æ ‡å’Œæ•°æ®æ­£ç¡®æ˜¾ç¤º
- [ ] ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"è·³è½¬åˆ°å“ç‰Œè¯¦æƒ…é¡µ
- [ ] CAGRä¸ºnullæ—¶æ˜¾ç¤º"N/A"
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸

### å“ç‰Œè¯¦æƒ…é¡µ
- [ ] é¢åŒ…å±‘å¯¼èˆªæ­£ç¡®
- [ ] 4ä¸ªæ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡æ­£ç¡®æ˜¾ç¤º
- [ ] å“ç‰Œç‹¬ç«‹ç«™æŒ‰é’®æ­£ç¡®ï¼ˆæœ‰/æ— ç½‘ç«™ï¼‰
- [ ] å“ç‰Œé”€å”®è¶‹åŠ¿æŠ˜çº¿å›¾æ­£ç¡®æ¸²æŸ“
- [ ] ç¤¾äº¤åª’ä½“4ä¸ªå¡ç‰‡æ­£ç¡®æ˜¾ç¤ºï¼ˆæœ‰æ•°æ®æ—¶ï¼‰
- [ ] ç¤¾äº¤åª’ä½“é“¾æ¥å¯ç‚¹å‡»è·³è½¬
- [ ] å•†å“ç½‘æ ¼å“åº”å¼å¸ƒå±€æ­£å¸¸
- [ ] å•†å“å¡ç‰‡æ‰€æœ‰ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
- [ ] å•†å“é”€å”®è¶‹åŠ¿è¿·ä½ å›¾æ­£ç¡®æ¸²æŸ“
- [ ] å•†å“å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå ä½å›¾
- [ ] ç‚¹å‡»"åœ¨äºšé©¬é€ŠæŸ¥çœ‹"è·³è½¬åˆ°Amazon
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸

---

**å‰ç«¯å±•ç¤ºéœ€æ±‚æ–‡æ¡£å®Œæˆï¼è¯·ç»§ç»­é˜…è¯»åå°ç®¡ç†éœ€æ±‚æ–‡æ¡£ã€‚**
